# Гайд по стилю разработки

---

## Наименования файлов

Для файлов различных типов в проекте предусмотрены соответствующие им постфиксы, которые следует использовать при создании новых файлов с содержанием, относящимся к конкретному типу.

Среди основных типов файлов:

1. Модули
   
    a. Базовые модули - `*.module.ts`
    
    b. GraphQL модули - `*.graphql-module.ts`
   
2. GraphQL резолверы
   
   a. Резолверы типов - `*.resolver.ts`
   
      * `@ResolveField` декораторы для полей, относящихся к типу
   
   b. Резолверы квери - `*.query-resolver.ts`

      * `@Query` декораторы для запросов, относящихся к типу

   с. Резолверы мутаций - `*.mutation-resolver.ts`

      * `@Mutation` декораторы для мутаций, относящихся к типу
   
3. GraphQL типы

   a. Object типы - `*.type.ts`

   b. Input типы - `*.input-type.ts`

4. ORM сущности

   a. Сами сущности - `*.entity.ts`

      * `@Entity` декоратор

   b. Описание полей, общих для сущностей и GraphQL типов - `*.fields.ts`
      
      * `@ObjectType` декоратор с параметром `isAbstract: true`
      * abstract класс

   с. Описание полей, общих для Entity, а также Object и Input GraphQL типов - `*.common-fields.ts`

      * `@ObjectType` и/или `@InputType` декораторы с параметром `isAbstract: true`
      * abstract класс
   

### Пример сущности

Возьмем в пример сущность User:

   * Общие для Entity, ObjectType и InputType поля сущности должны быть расположены в `user.common-fields.ts` файле

   * Общие для Entity и ObjectType поля должны быть расположены в `user.fields.ts`

   * Поля, недоступные в GraphQL типах, но необходимые в ORM сущности, должны быть в `user.entity.ts`

**_todo: описать связь классов сущности между собой (картинкой)_**

---

## Директории

Описание основных директорий:

1. `bin` - входные точки для запуска проекта в разных режимах

2. `cli` - CommandsModule, импортирующий cli команды из `cli/commands`

3. `common` - CommonModule и импортированные в него модули. Содержит весь код, который обычно нужен проекту вне зависимости от режима работы

4. `config` - директория с typescript файлами описывающими параметры разных модулей системы

5. `database` - DatabaseModule, импортирующий модули всех ORM сущностей. Также содержит директорию `migrations`, содержащую в себе сгенерированные файлы миграций базы данных

6. `graphql` - AppGraphqlModule, импортирующий модули всех GraphQL типов

7. `worker` - ProcessorsModule, импортирующий исполнителей задач очередей из `worker/processors`